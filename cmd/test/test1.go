package main

import (
	"encoding/json"
	"fmt"
	"github.com/fatih/structs"
)

// UserInfo 用户信息
type UserInfo struct {
	Name string
	Age  int
}

type User struct {
	UserInfo UserInfo
}

func (i UserInfo) toString() interface{} {
	return i
}

func main() {
	u1 := UserInfo{Name: "q1mi", Age: 18}
	m := structs.Map(&u1)
	for k, v := range m {
		fmt.Printf("key:%v value:%v value type:%T\n", k, v, v)
	}

	fmt.Println(u1.toString())
	datatype, _ := json.Marshal(u1)
	fmt.Println("map to string : " + string(datatype))
	u2 := User{UserInfo: u1}
	m2 := structs.Map(&u2.UserInfo)
	for k, v := range m2 {
		fmt.Printf("key:%v value:%v value type:%T\n", k, v, v)
	}
	fmt.Println(u2.UserInfo.toString())

	//m3 := u1.toMap()
	//for k, v := range m3.(map[string]interface{}) {
	//	fmt.Printf("key:%v value:%v value type:%T\n", k, v, v)
	//}
}
